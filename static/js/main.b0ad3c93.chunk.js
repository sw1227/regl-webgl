(this["webpackJsonpregl-webgl"]=this["webpackJsonpregl-webgl"]||[]).push([[0],{19:function(t,e,r){t.exports=r.p+"static/media/starry_night.e856b9af.jpg"},23:function(t,e,r){t.exports=r(35)},28:function(t,e,r){},35:function(t,e,r){"use strict";r.r(e);var n=r(0),a=r.n(n),o=r(18),c=r.n(o),i=(r(28),r(8)),u=r(9),f=r(5),l=r.n(f),s=function(){var t=l()(),e=t({frag:"\n    precision mediump float;\n    uniform vec4 color;\n    void main() {\n      gl_FragColor = color;\n    }",vert:"\n    precision mediump float;\n    attribute vec2 position;\n    void main() {\n      gl_Position = vec4(position, 0, 1);\n    }",attributes:{position:[[0,-1],[-1,.5],[1,1]]},uniforms:{color:t.prop("color")},count:3});return Object(n.useEffect)((function(){return t.frame((function(r){var n=r.time;t.clear({color:[0,0,0,0],depth:1}),e({color:[Math.cos(1*n),Math.sin(.8*n),Math.cos(3*n),1]})})),function(){t.destroy()}}),[]),a.a.createElement(a.a.Fragment,null)},p=r(1),m=r.n(p),v=r(3),d=r(12);function h(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};Object(n.useEffect)((function(){return Object(v.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t();case 1:case"end":return e.stop()}}),e)})))(),r}),e)}function g(t){return x.apply(this,arguments)}function x(){return(x=Object(v.a)(m.a.mark((function t(e){var r,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return r=t.sent,t.next=5,r.text();case 5:return n=t.sent,t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function b(t){return new Promise((function(e,r){var n=new Image;n.crossOrigin="anonymous",n.src=t,n.onload=Object(v.a)(m.a.mark((function t(){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,createImageBitmap(n);case 2:r=t.sent,e(r);case 4:case"end":return t.stop()}}),t)})))}))}function w(t,e,r){for(var n=t({frag:"\n    precision mediump float;\n    uniform sampler2D tex;\n    varying vec2 uv;\n    uniform float rcpDim;\n    float op(float a, float b) {\n      return ".concat(r,";\n    }\n    void main () {\n      float a = texture2D(tex, uv - vec2(0.0, 0.0) * rcpDim).x;\n      float b = texture2D(tex, uv - vec2(1.0, 0.0) * rcpDim).x;\n      float c = texture2D(tex, uv - vec2(0.0, 1.0) * rcpDim).x;\n      float d = texture2D(tex, uv - vec2(1.0, 1.0) * rcpDim).x;\n      float result = op(op(a, b), op(c, d));\n      gl_FragColor = vec4(result);\n    }"),vert:"\n    precision mediump float;\n    attribute vec2 position;\n    varying vec2 uv;\n    void main () {\n      uv = position;\n      gl_Position = vec4(1.0 - 2.0 * position, 0, 1);\n    }",attributes:{position:[-2,0,0,-2,2,2]},uniforms:{tex:t.prop("inTex"),rcpDim:t.prop("rcpDim")},framebuffer:t.prop("outFbo"),count:3}),a=e.width,o=[e];a>1;)a>>=1,o.push(t.framebuffer({width:a,height:a}));return function(){for(var e=0;e<o.length-1;e++)n({inTex:o[e],outFbo:o[e+1],rcpDim:1/o[e].width});var r;return t({framebuffer:o[o.length-1]})((function(){r=t.read()[0]})),r}}var E="/particle/quad.vert",y="/particle/screen.frag",k="/particle/particle.vert",_="/particle/particle.frag",j="/particle/update.frag",O=function(){var t=l()(),e=[[0,0],[1,0],[0,1],[0,1],[1,0],[1,1]],r=Array(2).fill().map((function(){return t.framebuffer({color:t.texture({radius:1,data:[0,0,0,0]}),depth:!1,depthStencil:!1})})),n=Array.from(Array(4096),(function(){return Math.floor(256*Math.random())})),o=Array(2).fill().map((function(){return t.framebuffer({color:t.texture({radius:32,data:n}),depth:!1,depthStencil:!1})})),c=function(r,n){return t({vert:r,frag:n,attributes:{a_pos:e},uniforms:{u_screen:t.prop("texture"),u_opacity:t.prop("opacity")},count:6})},i=function(e,r){return t({vert:e,frag:r,attributes:{a_index:Object(d.a)(Array(1024).keys())},uniforms:{u_particles:t.prop("particle"),u_particles_res:32},primitive:"points",count:1024})},u=function(r,n){return t({vert:r,frag:n,attributes:{a_pos:e},uniforms:{u_particles:function(t){var e=t.tick;return o[e%2]}},framebuffer:function(t){var e=t.tick;return o[(e+1)%2]},count:6})};return h(Object(v.a)(m.a.mark((function e(){var n,a,f;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=c,e.next=3,g(E);case 3:return e.t1=e.sent,e.next=6,g(y);case 6:return e.t2=e.sent,n=(0,e.t0)(e.t1,e.t2),e.t3=i,e.next=11,g(k);case 11:return e.t4=e.sent,e.next=14,g(_);case 14:return e.t5=e.sent,a=(0,e.t3)(e.t4,e.t5),e.t6=u,e.next=19,g(E);case 19:return e.t7=e.sent,e.next=22,g(j);case 22:e.t8=e.sent,f=(0,e.t6)(e.t7,e.t8),t.frame((function(e){var c=e.viewportWidth,i=e.viewportHeight,u=e.tick;r.forEach((function(t){t.resize(c,i)})),r[u%2].use((function(){t.clear({color:[0,0,0,1]}),n({opacity:.99,texture:r[(u+1)%2]}),a({particle:o[u%2]})})),n({opacity:1,texture:r[u%2]}),f()}));case 25:case"end":return e.stop()}}),e)}))),[],(function(){t.destroy()})),a.a.createElement(a.a.Fragment,null)},D="/kuramoto/quad.vert",F="/kuramoto/quad.frag",M="/kuramoto/update.frag",A=function(){var t=l()(),e=Array(4194304).fill(0).map((function(){return 255*Math.random()})),r=Array(2).fill().map((function(){return t.framebuffer({color:t.texture({radius:1024,data:e}),depth:!1,depthStencil:!1})})),n=function(e,n){return t({vert:e,frag:n,attributes:{position:[[0,0],[1,0],[0,1],[0,1],[1,0],[1,1]]},uniforms:{prevState:function(t){var e=t.tick;return r[e%2]}},count:6})},o=function(e,n){return t({vert:e,frag:n,attributes:{position:[[0,0],[1,0],[0,1],[0,1],[1,0],[1,1]]},uniforms:{radius:1024,prevState:function(t){var e=t.tick;return r[e%2]},k:40,omega:10},count:6})};return h(Object(v.a)(m.a.mark((function e(){var a,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=o,e.next=3,g(D);case 3:return e.t1=e.sent,e.next=6,g(M);case 6:return e.t2=e.sent,a=(0,e.t0)(e.t1,e.t2),e.t3=n,e.next=11,g(D);case 11:return e.t4=e.sent,e.next=14,g(F);case 14:e.t5=e.sent,c=(0,e.t3)(e.t4,e.t5),t.frame((function(t){var e=t.tick;c(),r[(e+1)%2].use((function(){a()}))}));case 17:case"end":return e.stop()}}),e)}))),[],(function(){t.destroy()})),a.a.createElement(a.a.Fragment,null)},S="/life/update.frag",P="/life/quad.vert",q="/life/quad.frag",B=function(){var t=l()(),e=Array(4194304).fill(0).map((function(){return Math.random()<.1?255:0})),r=Array(2).fill().map((function(){return t.framebuffer({color:t.texture({radius:1024,data:e}),depth:!1,depthStencil:!1})})),n=function(e,n){return t({vert:e,frag:n,attributes:{position:[-4,-4,4,-4,0,4]},uniforms:{prevState:function(t){var e=t.tick;return r[e%2]},radius:1024},depth:{enable:!1},count:3})},o=function(e,n){return t({vert:e,frag:n,attributes:{position:[-4,-4,4,-4,0,4]},uniforms:{prevState:function(t){var e=t.tick;return r[e%2]}},depth:{enable:!1},count:3})};return h(Object(v.a)(m.a.mark((function e(){var a,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,g(P);case 3:return e.t1=e.sent,e.next=6,g(S);case 6:return e.t2=e.sent,a=(0,e.t0)(e.t1,e.t2),e.t3=o,e.next=11,g(P);case 11:return e.t4=e.sent,e.next=14,g(q);case 14:e.t5=e.sent,c=(0,e.t3)(e.t4,e.t5),t.frame((function(t){var e=t.tick;c(),r[(e+1)%2].use((function(){a()}))}));case 17:case"end":return e.stop()}}),e)}))),[],(function(){t.destroy()})),a.a.createElement(a.a.Fragment,null)},C=r(22),W=function(){var t=Object(n.useState)(["Profiling. wait seconds..."]),e=Object(C.a)(t,2),r=e[0],o=e[1],c=document.body.appendChild(document.createElement("canvas"));c.width=1,c.height=1;for(var i=l()(c),u=[],f=0;f<16777216;f++)u.push(Math.floor(255*Math.random()));var s=[];u.forEach((function(t){s.push(t,t,t,t)}));var p=i.texture({width:4096,height:4096,data:s});return h(Object(v.a)(m.a.mark((function t(){var e;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=w(i,p,"max(a, b)"),200,[e,function(){for(var t=function(t,e){return Math.max(t,e)},e=t(u[0],u[1]),r=2;r<u.length;r++)e=t(e,u[r]);return e}].forEach((function(t,e){for(var r=0,n=0;n<200;n++){var a=performance.now();t();r+=performance.now()-a}var c=Math.round(r/200*100)/100;o((function(t){return[].concat(Object(d.a)(t),["[".concat(0===e?"GPU":"CPU","] Finished: Average time=").concat(c," [msec]")])}))}));case 4:case"end":return t.stop()}}),t)}))),[]),a.a.createElement("div",{style:{padding:"10px"}},a.a.createElement("h3",null,"Reduction algorithm with WebGL"),a.a.createElement("p",null,"Based on regl official example ",a.a.createElement("br",null),"https://github.com/regl-project/regl/blob/gh-pages/example/reduction.js"),r.map((function(t,e){return a.a.createElement("p",{key:e},t)})))},I=r(19),G=r.n(I),H="/vector_field/quad.vert",J="/vector_field/vector.frag",L=function(){var t=l()(),e=t({vert:t.prop("vert"),frag:t.prop("frag"),attributes:{position:[[0,0],[1,0],[0,1],[0,1],[1,0],[1,1]]},uniforms:{texture:t.prop("texture"),width:t.prop("width"),height:t.prop("height"),time:t.prop("time")},count:6});return h(Object(v.a)(m.a.mark((function r(){var n,a,o,c;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,g(H);case 2:return n=r.sent,r.next=5,g(J);case 5:return a=r.sent,r.next=8,b(G.a);case 8:o=r.sent,c=t.texture(o),t.frame((function(t){var r=t.time;e({vert:n,frag:a,texture:c,width:o.width,height:o.height,time:r})}));case 11:case"end":return r.stop()}}),r)}))),[],(function(){t.destroy()})),a.a.createElement(a.a.Fragment,null)},R=function(){return a.a.createElement("div",null,a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement(i.b,{to:"/"},"Home")),a.a.createElement("li",null,a.a.createElement(i.b,{to:"/sample"},"Sample")),a.a.createElement("li",null,a.a.createElement(i.b,{to:"/particle"},"Particle")),a.a.createElement("li",null,a.a.createElement(i.b,{to:"/kuramoto"},"Kuramoto")),a.a.createElement("li",null,a.a.createElement(i.b,{to:"/life"},"Life")),a.a.createElement("li",null,a.a.createElement(i.b,{to:"/reduce"},"Reduce")),a.a.createElement("li",null,a.a.createElement(i.b,{to:"/vector_field"},"VectorField"))))},T=function(){return a.a.createElement(i.a,null,a.a.createElement("div",null,a.a.createElement(u.a,{path:"/",exact:!0,component:R}),a.a.createElement(u.a,{path:"/sample",component:s}),a.a.createElement(u.a,{path:"/particle",component:O}),a.a.createElement(u.a,{path:"/kuramoto",component:A}),a.a.createElement(u.a,{path:"/life",component:B}),a.a.createElement(u.a,{path:"/reduce",component:W}),a.a.createElement(u.a,{path:"/vector_field",component:L})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[23,1,2]]]);
//# sourceMappingURL=main.b0ad3c93.chunk.js.map